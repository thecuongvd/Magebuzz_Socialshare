<?php
/**
 * @copyright Copyright (c) 2016 www.magebuzz.com
 */

$position = $block->getScopeConfig('socialshare/position/position');
if ($position == 'sunkmenu') {
    $enableFacebook = $block->getScopeConfig('socialshare/facebook/enable_facebook');
    $enableTwitter = $block->getScopeConfig('socialshare/twitter/enable_twitter');
    $enableGooglePlus = $block->getScopeConfig('socialshare/googleplus/enable_google_plus');
    $enablePinit = $block->getScopeConfig('socialshare/pinitsharing/enable_pinit');
    ?>
    <div id="magebuzz-social" class="pos-<?php echo $position; ?>">
        <div class="label">
            <img src="<?php echo $block->getViewFileUrl('Magebuzz_Socialshare::images/social-share-icon.png'); ?>" />
        </div>
        <div class="share-button-list">
            <?php
            if ($enableFacebook == 1):
                echo $block->getFacebookButton();
            endif;

            if ($enableTwitter == 1):
                echo $block->getTwitterButton();
            endif;

            if ($enableGooglePlus == 1):
                echo $block->getGooglePlusButton();
            endif;

            if ($enablePinit == 1):
                echo $block->getPinItButton();
            endif;
            ?>
        </div>
    </div>
    <script>
        require(['jquery'], function ($) {
            $(document).ready(function () {
                menuTop = $('#magebuzz-social').position().top;
                $('#magebuzz-social').hover(
                    function(){ 
                        $('#magebuzz-social').css({width:'auto', height: 'auto'});
                        $('#magebuzz-social').children('.label').hide();
                        $('#magebuzz-social').children('.share-button-list').fadeIn();
                    },
                    function(){
                        $('#magebuzz-social').css({width:'50px', height:'30px'});
                        $("#magebuzz-social").children('.label').show();
                        $("#magebuzz-social").children('.share-button-list').fadeOut();
                    }
                );

                $(window).scroll(function () {
                    var scrollTop = $(window).scrollTop();
                    var newPosition = menuTop + scrollTop;
                    $('#magebuzz-social').css('top', newPosition);
                });
            });
        });
    </script>
<?php } ?>
